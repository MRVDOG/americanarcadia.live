---
---

<span id="auth-sign-in-button">
  <slot />
</span>

<script>
  import { auth } from '../../lib/authStore'

  auth.subscribe((clerk) => {
    if (clerk !== null && clerk.isReady()) {
      const signInButton = document.getElementById('auth-sign-in-button')
      if (signInButton) {
        signInButton.addEventListener('click', () => {
          clerk.openSignIn({
            afterSignInUrl: typeof window !== 'undefined' ? window.location.href : '/',
            afterSignUpUrl: typeof window !== 'undefined' ? window.location.href : '/',
          })
        })
      }
    }
  })
</script>
